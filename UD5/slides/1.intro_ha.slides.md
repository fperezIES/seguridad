
<!-- .slide: data-background="#2C3E50" -->

# Alta Disponibilidad

---

## Introducción


 **Alta disponibilidad (HA):** capacidad de un sistema, servicio o aplicación para **mantenerse operativo y accesible durante la mayor parte del tiempo posible**, minimizando interrupciones no planificadas y maximizando el tiempo de actividad. 

--

Importante en entornos donde la continuidad del servicio es crítica:
- Sistemas financieros
- Comercio electrónico
- Infraestructuras de TI empresariales.

--

#### Características principales:

1. **Tolerancia a fallos**: Los sistemas de alta disponibilidad están diseñados para seguir funcionando incluso si uno o varios componentes fallan.
2. **Redundancia**: Se emplean múltiples componentes (servidores, discos, redes) para garantizar que, si uno falla, otro pueda asumir su función.
3. **Monitorización y recuperación automática**: El sistema supervisa continuamente su estado y puede reconfigurarse automáticamente para evitar interrupciones.
4. **Escalabilidad**: La infraestructura debe ser capaz de manejar aumentos de carga sin comprometer la disponibilidad.

--

#### Elementos clave:

- **Cluster de alta disponibilidad**: Conjunto de servidores configurados para trabajar juntos y asegurar que, si uno falla, los demás puedan tomar el control automáticamente.
- **Balanceadores de carga**: Distribuyen el tráfico entre varios recursos para evitar sobrecargas en un único punto.
- **Almacenamiento redundante**: Uso de tecnologías como RAID, sistemas distribuidos o replicación de datos.
- **Redundancia en la red**: Uso de múltiples conexiones de red para evitar caídas por fallos en la conectividad.
- **Plan de recuperación ante desastres**: Incluye procedimientos para restaurar operaciones ante fallos mayores.


--

## Ejemplo:

Un sitio web de comercio electrónico puede implementar alta disponibilidad mediante:

- un **clúster** de servidores
- bases de datos **replicadas**
- **balanceadores de carga**

Si uno de los servidores falla, el tráfico se redirige automáticamente a los demás, asegurando que los usuarios puedan seguir navegando y realizando compras sin interrupciones.


---

## Tipos de interrupciones

* Interrupciones **previstas**:
	* Cambios o mejoras en nuestro **hardware**
	* Actualizaciones **software**  	
* Interrupciones **imprevistas**:
	* Un apagón
	* Un error del hardware o del software
	* Problemas de seguridad
	* Desastre natural
	* Caídas involuntarias del sistema
	* Sobrecarga de sistemas

---


## Definición de Disponibilidad

**Disponibilidad:** porcentaje del tiempo que un servicio o dispositivo está operativo:

$$D=\frac{MTBF}{MTTR + MTBF}$$

* **MTBF:** Mean Time Between Failure
* **MTTR:** Mean Time To Repair

--

### Alta disponibilidad: los nueves

* La disponibilidad **se expresa en número de nueves**: 
	* Disponibilidad de 3 nueves significa que D = 99,9%. 
	* Aplicaciones **críticas** exigen una disponibilidad de **5 nueves**, 
		

| Nueves |    D(%)      |  Inactividad anual |
|:------:|:-------------|------------------:|
| 2 | 99% | $3,65 días |
| 3 | 99.9% |   8,76 horas |
| 4 | 99.99%|    52,56 minutos |
| 5 | 99.999% |    5,26 minutos|
| 6 | 99.9999% |    31,5 segundos |


---

## Redundancia 

---

### Redundancia

La **redundancia**: estrategia de **replicar** componentes críticos de un sistema.
En caso de fallo de uno de ellos, el servicio pueda continuar funcionando sin interrupciones. 

--

#### Tipos de redundancia:

1. **Redundancia de hardware**:    
    - Uso de servidores duplicados o clústeres.
    - Sistemas de almacenamiento redundantes (por ejemplo, RAID para discos duros).
    - Fuentes de alimentación y ventiladores duplicados en los servidores.
2. **Redundancia de software**:    
    - Copias de seguridad y replicación de bases de datos en tiempo real.
    - Aplicaciones distribuidas capaces de ejecutarse en múltiples nodos.
3. **Redundancia de red**:    
    - Uso de múltiples rutas de red para evitar interrupciones por fallos en un enlace.
    - Duplicación de switches, routers o firewalls.

--

4. **Redundancia geográfica**:    
    - Centros de datos replicados en diferentes ubicaciones físicas (disaster recovery).
    - Replicación de servicios y datos entre distintas zonas o regiones.
5. **Redundancia lógica**:    
    - Algoritmos que permiten la recuperación de información o el mantenimiento del servicio ante fallos parciales.
    - Balanceadores de carga para gestionar varias instancias de un mismo servicio.

--

#### Métodos de implementación:

- **Activa/Activa**: Todas las instancias redundantes están en funcionamiento y gestionan el tráfico simultáneamente. Esto aumenta la capacidad y reduce los riesgos de sobrecarga.
- **Activa/Pasiva**: Solo una instancia está activa mientras las otras permanecen en espera para asumir el control en caso de fallo.

--

#### Beneficios de la redundancia:

- **Minimización de interrupciones**: Si un componente falla, otro toma el control automáticamente.
- **Mayor confiabilidad**: Se reducen los puntos únicos de fallo (**SPOF**, por sus siglas en inglés).
- **Escalabilidad**: La redundancia puede facilitar el manejo de mayores volúmenes de trabajo al distribuir la carga.

---

##  Ejemplos de HA

--

### Redundancia de suministro eléctrico

![](img/HA_suministro_electrico.png)<!-- .element width="80%" -->

--

### Redundancia de red

![](img/HA_red.png)<!-- .element width="80%" -->

--

### Redundancia: balanceador de carga

![](img/HA_balanceador.png)<!-- .element width="80%" -->